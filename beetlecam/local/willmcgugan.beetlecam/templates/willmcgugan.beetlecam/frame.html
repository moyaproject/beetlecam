<html>

    <head>

        <style type="text/css">

        * {
            box-sizing:border-box;
        }
        body:before
        {
            content:' ';
            display:block;
            background-color:rgba(255,255,255,0.7);
            width:100vw;
            height:100vh;
            position:absolute;
        }
        body
        {
            width:100%;
            height:100%;
            padding:0;
            margin:0;
            background-image: url(${frame.filename|'thumbnail'(processor='blur')});
            background-size:cover;
            background-attachment:fixed;
        }

        body:hover .frame-container
        {
            width:calc(100vw - 300px);
            transition: width 1s;
        }

        body:hover .info-container
        {
            margin-right:0px;
        }

        .frame
        {
            /* width:calc(50vw - 64px); */
            height:calc(100vh - 64px);
            margin:32px;
            background-image:url({% url "serve" from 'serveuploads' with path=frame.filename %});
            background-size: contain;
            background-position: center center;
            background-repeat: no-repeat;
        }

        .frame-border
        {
            padding: 32px;
            display:block;
        }

        .frame-container
        {
            position:absolute;
            z-index:10;
            display:block;
            width:100vw;
            transition:width 1s;
        }
        .info-container
        {
            position:absolute;
            z-index:11;
            width:300px;
            height:100vh;
            right:0px;
            color:#000;
            font-family: arial;
            font-size:12px;
            background-color:rgba(255,255,255,0.2);
            padding:4px;
            transition:margin-right 1s;
            margin-right:-300px;
        }

        .info
        {
            padding:4px;
        }

        .refresh-bar
        {
            width:0;
            height:2px;
            background-color:magenta;
            position:absolute;
            top:0px;
        }

        .refresh-bar.countdown
        {
            width:100%;
            transition:width ${.app.settings.refresh}s;
        }

        @media (max-width: 768px)
        {
            body::before
            {
                /*background-color:inherit;*/
            }
            body:hover .frame-container
            {
                width:100%;

            }

            body:hover .info-container
            {
                margin-right:0px;
            }
            .frame-container
            {
                width:100vw;
                /*display:inline-block;
                position:static;*/
            }
            .info-container
            {
                display:inline-block;
                position:static;
                margin-right:0px;
                width:100%;
                background-color:rgba(255,255,255,0.8);
                margin-top:100vh;
            }

        }

        </style>

    </head>

    <body>

        <div class="frame-container">
            <div class="refresh-bar"></div>
            <div class="frame"></div>
        </div>
        <div class="info-container">
            <div class="info">
                {% include "info.html" %}
            </div>
        </div>

        <script src="{% media 'js/jquery.js' from 'moya.twitter.bootstrap' %}"></script>
        <script>
            function refresh()
            {

            }
            $(function(){
                $('.refresh-bar').addClass('countdown');
                setTimeout(refresh, ${.app.settings.refresh} * 1000);
            });

        </script>
    </body>

</html>
